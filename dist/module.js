define(["@grafana/ui","react"],function(e,t){return function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}return o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=2)}([function(t,o){t.exports=e},function(e,o){e.exports=t},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.plugin=void 0;var r=o(0),n=o(3),a=o(4),l=o(5),i=t.plugin=new r.PanelPlugin(n.ImagesPanel);i.setDefaults(l.defaultOptions),i.setEditor(a.ImagesPanelEditor)},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImagesPanel=void 0;var r,n=o(1),a=(r=n)&&r.__esModule?r:{default:r},l=o(0);var i,s=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype.getColorsBasedOnValue=function(e){var t=this.props.options,o=t.thresholds,r=t.useThreshold,n="";return r?(o.forEach(function(t){e>t.value&&(n=(0,l.getColorFromHexRgbOrName)(t.color))}),{textColor:n,borderColor:n}):{textColor:(0,l.getColorFromHexRgbOrName)(this.props.options.textColor),borderColor:(0,l.getColorFromHexRgbOrName)(this.props.options.borderColor)}},t.prototype.renderItemFromRow=function(e,t){var o=this.props.options,r=o.imageSize,n=o.textFontSize,l=t.labelIndex,i=t.thresholdIndex,s=t.imageIndex,u=t.imageTypeIndex,d={image:e[s],label:null,thresholdValue:0,imageType:"bmp"};l>=0&&(d.label=e[l]),i>=0&&(d.thresholdValue=e[i]),u>=0&&(d.imageType=e[u]);var h=this.getColorsBasedOnValue(d.thresholdValue),p=h.textColor,f=h.borderColor;return a.default.createElement("div",{key:d.image,style:{width:r+"px",margin:"0px 10px 10px 0px",padding:"4px",border:"3px solid",borderColor:f}},a.default.createElement("img",{src:"data:image/"+d.imageType+";base64,"+d.image,style:{width:r-14+"px"}}),d.label?a.default.createElement("div",{style:{color:p,fontSize:n+"px"}},d.label):"")},t.prototype.render=function(){var e=this;if(!("Done"===this.props.data.state&&this.props.data.series.length>0))return a.default.createElement("div",{style:{textAlign:"center",lineHeight:this.props.height+"px"}},"There is no data for this panel");for(var t={imageIndex:-1,labelIndex:-1,thresholdIndex:-1,imageTypeIndex:-1},o=0;o<this.props.data.series[0].fields.length;++o){var r=this.props.data.series[0].fields[o];"image"===r.name&&"string"===r.type?t.imageIndex=o:"label"!==r.name||"string"!==r.type&&"number"!==r.type?"value"===r.name&&"number"===r.type?t.thresholdIndex=o:"imagetype"===r.name&&"string"===r.type&&(t.imageTypeIndex=o):t.labelIndex=o}if(-1===t.imageIndex)return a.default.createElement("div",{style:{textAlign:"center",lineHeight:this.props.height+"px"}},"There are no images in the data");var n=this.props.data.series[0].rows.map(function(o){return e.renderItemFromRow(o,t)});return a.default.createElement("div",{style:{overflow:"scroll",width:this.props.width,height:this.props.height}},a.default.createElement("div",{style:{display:"flex",flexWrap:"wrap"}},n))},t}(n.PureComponent);t.ImagesPanel=u},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImagesPanelEditor=void 0;var r,n=o(1),a=(r=n)&&r.__esModule?r:{default:r},l=o(0);var i,s=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var o in t)t.hasOwnProperty(o)&&(e[o]=t[o])})(e,t)},function(e,t){function o(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(o.prototype=t.prototype,new o)}),u=function(){return(u=Object.assign||function(e){for(var t,o=1,r=arguments.length;o<r;o++)for(var n in t=arguments[o])Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e}).apply(this,arguments)},d=function(e){function t(t){var o=e.call(this,t)||this;return o.onImageSizeChange=function(e){var t=e.target;return o.setState({imageSize:t.value})},o.onUpdatePanel=function(){return o.props.onOptionsChange(u({},o.props.options,{imageSize:o.state.imageSize,textColor:o.state.textColor,borderColor:o.state.borderColor,textFontSize:o.state.textFontSize,thresholds:o.state.thresholds,useThreshold:o.state.useThreshold}))},o.onKeyUpImageSize=function(e){return"Enter"===e.key&&o.onUpdatePanel()},o.onTextColorChange=function(e){return o.setState({textColor:e},function(){return o.onUpdatePanel()})},o.onBorderColorChange=function(e){o.setState({borderColor:e},function(){return o.onUpdatePanel()})},o.onThresholdChange=function(e){return o.setState({thresholds:e},function(){return o.onUpdatePanel()})},o.onUsingThresholdChange=function(){return o.setState({useThreshold:!o.state.useThreshold},function(){return o.onUpdatePanel()})},o.onTextSizeChange=function(e){var t=e.target;return o.setState({textFontSize:t.value},function(){return o.onUpdatePanel()})},o.state={imageSize:t.options.imageSize,textColor:t.options.textColor,borderColor:t.options.borderColor,textFontSize:t.options.textFontSize,thresholds:t.options.thresholds,useThreshold:t.options.useThreshold},o}return s(t,e),t.prototype.render=function(){return a.default.createElement(a.default.Fragment,null,a.default.createElement(l.PanelOptionsGroup,{title:"Images options"},a.default.createElement("div",{className:"gf-form"},a.default.createElement(l.FormField,{label:"Image size",labelWidth:10,inputWidth:25,value:this.state.imageSize,onChange:this.onImageSizeChange,onBlur:this.onUpdatePanel,onKeyUp:this.onKeyUpImageSize})),a.default.createElement("div",{className:"gf-form"},a.default.createElement(l.FormField,{label:"Text font size ("+this.state.textFontSize+")",labelWidth:10,inputWidth:25,inputEl:a.default.createElement("input",{type:"range",value:this.state.textFontSize,onChange:this.onTextSizeChange,min:8,max:28})})),a.default.createElement("div",{className:"gf-form"},a.default.createElement(l.Switch,{label:"Use threshold for border color",checked:this.state.useThreshold,onChange:this.onUsingThresholdChange})),this.state.useThreshold&&a.default.createElement("div",{className:"gf-form"},a.default.createElement(l.ThresholdsEditor,{thresholds:this.state.thresholds,onChange:this.onThresholdChange})),!this.state.useThreshold&&a.default.createElement(a.default.Fragment,null,a.default.createElement("div",{className:"gf-form"},a.default.createElement(l.FormField,{label:"Border color",labelWidth:10,inputWidth:25,inputEl:a.default.createElement(l.ColorPicker,{color:this.state.borderColor,onChange:this.onBorderColorChange,enableNamedColors:!0})})),a.default.createElement("div",{className:"gf-form"},a.default.createElement(l.FormField,{label:"Text color",labelWidth:10,inputWidth:25,inputEl:a.default.createElement(l.ColorPicker,{color:this.state.textColor,onChange:this.onTextColorChange})})))))},t}(n.PureComponent);t.ImagesPanelEditor=d},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.defaultOptions={imageSize:80,textColor:"#ffffff",borderColor:"#ffffff",textFontSize:14,thresholds:[],useThreshold:!1}}])});
//# sourceMappingURL=module.js.map